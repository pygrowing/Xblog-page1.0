/*! flypanels - v0.12.1 - 2015-06-17
* https://github.com/SubZane/flyPanels
* Copyright (c) 2015 Andreas Norman; Licensed MIT */
!function(a){function b(b,d){function e(){f(),C=a(".flypanels-left").css("width"),y(),d.search.init&&t(),d.treeMenu.init&&g(),a(document).ready(function(){E.removeClass("preload")}),B("onInit")}function f(){a(".flypanels-left").css("height",F),a(".flypanels-right").css("height",F),a(".flypanels-overlay").css("height",F)}function g(){(kitUtils.isAndroid()||kitUtils.isIOS())&&a(".flypanels-treemenu").addClass("touch"),a(".flypanels-treemenu li.haschildren "+d.treeMenu.expandHandler).click(function(b){a(this).parent().parent().toggleClass("expanded"),b.preventDefault()})}function h(){r(),p(),n()}function i(){a("body").removeClass("flypanels-open"),a("html").removeClass("flypanels-open"),B("onCloseLeft")}function j(){a("body").removeClass("flypanels-open"),a("html").removeClass("flypanels-open"),B("onCloseRight")}function k(){a("body").addClass("flypanels-open"),a("html").addClass("flypanels-open"),B("onOpenLeft")}function l(){a("body").addClass("flypanels-open"),a("html").addClass("flypanels-open"),B("onOpenRight")}function m(){a(".flypanels-content").append('<div id="flypanels-overlay" class="overlay"></div>'),a(".flypanels-content").on("click touchmove touchend touchleave touchcancel",function(a){h(),a.preventDefault()}),B("onOpen")}function n(){a(".flypanels-content #flypanels-overlay").remove(),a(".flypanels-content").off("click touchmove touchend touchleave touchcancel"),B("onClose")}function o(b){E.addClass("openright"),setTimeout(function(){a(".flypanels-right").find('[data-panel="'+b+'"]').show(),l(),m()},200)}function p(){E.removeClass("openright"),setTimeout(function(){a(".offcanvas .panelcontent").hide(),j(),n()},200)}function q(b){E.addClass("openleft"),setTimeout(function(){a(".flypanels-left").find('[data-panel="'+b+'"]').show(),k(),m()},200)}function r(){E.removeClass("openleft"),setTimeout(function(){a(".offcanvas .panelcontent").hide(),i(),n()},200)}function s(){F=window.innerHeight,f()}function t(){(kitUtils.isAndroid()||kitUtils.isIOS())&&a(".flypanels-searchresult").addClass("touch"),d.search.searchPanel.find(".searchbutton").on("click",function(a){a.preventDefault(),v("show"),w(d.search.searchPanel.find(".searchbox input").val())}),d.search.searchPanel.find(".searchbox input").keydown(function(b){13===b.which&&(v("show"),w(a(this).val()),a(this).blur())}),J.has("searchQuery")===!0&&d.search.saveQueryCookie===!0&&w(J.get("searchQuery"))}function u(a){"hide"===a?d.search.searchPanel.find(".errormsg").hide():d.search.searchPanel.find(".errormsg").show()}function v(a){"hide"===a?d.search.searchPanel.find(".loading").hide():d.search.searchPanel.find(".loading").show()}function w(b){u("hide"),$jsonurl=d.search.searchPanel.find(".searchbox").data("searchurl"),$ajaxCall=a.ajax({url:$jsonurl+"&q="+b,dataType:"json"}),$ajaxCall.done(function(a){var c;$foundResults=a.Items.length,$foundResults>0?(d.search.saveQueryCookie===!0&&J.set("searchQuery",b,null,"/"),c=x(a.Items)):(d.search.saveQueryCookie===!0&&J.remove("searchQuery","/"),u("show")),d.search.searchPanel.find(".resultinfo .query").html(b),d.search.searchPanel.find(".resultinfo .num").html($foundResults),d.search.searchPanel.find(".flypanels-searchresult").html(c),v("hide"),d.search.searchPanel.find(".resultinfo").show(),d.search.searchPanel.find(".flypanels-searchresult").show()}),$ajaxCall.fail(function(){u("show")})}function x(a){output="<ul>";for(var b in a)output+="Page"===a[b].Type?'<li><a href="'+a[b].LinkUrl+'"><span class="link">'+a[b].Header+'</span>  <span class="type"><i class="fa page"></i></span></a>':'<li><a href="'+a[b].LinkUrl+'"><span class="link">'+a[b].Header+'</span>  <span class="type"><i class="fa doc"></i></span></a>';return output+="</ul>",output}function y(){if(a(".panelcontent").on("touchmove",function(b){a(this).prop("scrollHeight")<=parseInt(F,10)&&b.preventDefault()}),a(".offcanvas").on("touchmove",function(a){a.preventDefault()}).on("touchmove",".panelcontent",function(a){a.stopPropagation()}),a(".flypanels-button-left").on("click",function(){var b=a(this).data("panel");a(".flypanels-container").hasClass("openleft")?r():q(b)}),a(".flypanels-button-right").on("click",function(){var b=a(this).data("panel");a(".flypanels-container").hasClass("openright")?p():o(b)}),G===!0){var b;a(window).resize(function(){clearTimeout(b),b=setTimeout(s,100)})}a(window).bind("orientationchange",function(){f()}),B("onLoad")}function z(a,b){return b?void(d[a]=b):d[a]}function A(){E.each(function(){var b=a(this);B("onDestroy"),b.removeData("plugin_"+c)})}function B(a){void 0!==d[a]&&d[a].call(D)}var C,D=b,E=a(b),F=window.innerHeight,G=!0,H=(parseInt(a(".flypanels-topbar").css("height"),10),{init:!1,expandHandler:"a.expand"});d.treeMenu=a.extend({},H,d.treeMenu);var I={init:!1,saveQueryCookie:!1,searchPanel:a(".offcanvas").find('[data-panel="search"]')};d.search=a.extend({},I,d.search),d=a.extend({},a.fn[c].defaults,d);var J={get:function(a){return a?decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(a).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null:null},set:function(a,b,c,d,e,f){if(!a||/^(?:expires|max\-age|path|domain|secure)$/i.test(a))return!1;var g="";if(c)switch(c.constructor){case Number:g=1/0===c?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+c;break;case String:g="; expires="+c;break;case Date:g="; expires="+c.toUTCString()}return document.cookie=encodeURIComponent(a)+"="+encodeURIComponent(b)+g+(e?"; domain="+e:"")+(d?"; path="+d:"")+(f?"; secure":""),!0},remove:function(a,b,c){return this.hasItem(a)?(document.cookie=encodeURIComponent(a)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(c?"; domain="+c:"")+(b?"; path="+b:""),!0):!1},has:function(a){return a?new RegExp("(?:^|;\\s*)"+encodeURIComponent(a).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie):!1},keys:function(){for(var a=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/),b=a.length,c=0;b>c;c++)a[c]=decodeURIComponent(a[c]);return a}};return e(),{option:z,destroy:A}}var c="flyPanels";a.fn[c]=function(d){if("string"==typeof arguments[0]){var e,f=arguments[0],g=Array.prototype.slice.call(arguments,1);return this.each(function(){if(!a.data(this,"plugin_"+c)||"function"!=typeof a.data(this,"plugin_"+c)[f])throw new Error("Method "+f+" does not exist on jQuery."+c);e=a.data(this,"plugin_"+c)[f].apply(this,g)}),void 0!==e?e:this}return"object"!=typeof d&&d?void 0:this.each(function(){a.data(this,"plugin_"+c)||a.data(this,"plugin_"+c,new b(this,d))})},a.fn[c].defaults={onInit:function(){},onLoad:function(){},onOpenLeft:function(){},onOpenRight:function(){},onCloseLeft:function(){},onCloseRight:function(){},onDestroy:function(){}}}(jQuery);